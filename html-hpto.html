<!DOCTYPE html>
<html>
<head>
<title>HTML HPTO</title>
<script>
  window.addEventListener('message', function(event) {
    // IMPORTANT: Check the origin of the data
    if (event.origin === 'https://browse.app.spotify.com') {
      if (!event.data.clickTrackingUrl) {
        return;
      }
      var container = document.getElementById('main');
      console.log(`HTML HPTO setting click listener with clickTrackingUrl ${event.data.clickTrackingUrl}`);
      container.addEventListener('click', function () {
        // Fire click tracking pixel with supplied url
        var img = document.createElement('img');
        img.style.display = 'none';
        img.width = '1px';
        img.height = '1px';
        img.src = event.data.clickTrackingUrl;

        container.appendChild(img);
        console.log(`HTML HPTO: adding tracking pixel ${event.data.clickTrackingUrl}`);
      });
    }
  });
</script>
</head>
<body>
  <div id="main"><h1>Click Me</h1></div>
</body>
</html>
